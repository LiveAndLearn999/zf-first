(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-793c48a8"],{3011:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]},[a("div",{staticStyle:{height:"46px","line-height":"46px",overflow:"hidden"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{"padding-left":"16px"}},[a("i",{staticClass:"el-icon-s-unfold"}),a("span",{staticStyle:{"padding-left":"9px"}},[t._v(" "+t._s(t.$store.state.AdminData.active_title)+" ")])])]),a("el-col",{attrs:{span:18}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-link",{staticClass:"menu",on:{click:function(e){return t.onSubMenu("onRefresh",!0)}}},[t._v("刷新")]),a("el-link",{staticClass:"menu",on:{click:function(e){return t.onSubMenu("onSearch",!0)}}},[t._v("搜索")]),t._l(t.$store.state.AdminData.right_menus,(function(e,o){return a("el-link",{key:o,staticClass:"menu",on:{click:function(a){return t.onSubMenu(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)])],1)],1),a("div",{staticStyle:{"border-top":"solid 1px #f2f1f4"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.rows,height:t.height-60-46-48,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","highlight-current-row":!0,size:"mini"},on:{"sort-change":t.onSortChange,"current-change":t.onSelectRow}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"real_name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"mobile",label:"登录手机"}}),a("el-table-column",{attrs:{prop:"role_name",label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(""==e.row.role_name?"未设置":e.row.role_name)+" ")]}}])}),a("el-table-column",{attrs:{prop:"add_time",label:"添加时间",sortable:!0}}),a("el-table-column",{attrs:{prop:"last_time",label:"最近登录时间",align:"center",sortable:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0==e.row.last_time?"还未登陆":e.row.last_time)+" ")]}}])}),a("el-table-column",{attrs:{prop:"last_ip",label:"最近登录IP",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0==e.row.last_ip?"-":e.row.last_ip)+" ")]}}])})],1),a("div",{staticClass:"page",style:{width:t.width-250+"px"}},[a("el-pagination",{attrs:{"current-page":t.SearchFormData.page_num,layout:"prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){return t.$set(t.SearchFormData,"page_num",e)},"update:current-page":function(e){return t.$set(t.SearchFormData,"page_num",e)},"current-change":t.onPageChange}})],1)],1),a("el-dialog",{attrs:{title:"提示",visible:t.search_show,width:"30%"},on:{"update:visible":function(e){t.search_show=e}}},[a("el-form",{attrs:{model:t.SearchFormData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"员工姓名:"}},[a("el-input",{model:{value:t.SearchFormData.real_name,callback:function(e){t.$set(t.SearchFormData,"real_name",e)},expression:"SearchFormData.real_name"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.search_show=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSearchSubmit}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加",visible:t.add_show,width:"500px"},on:{"update:visible":function(e){t.add_show=e}}},[a("el-form",{attrs:{model:t.AddFormData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"登陆手机:"}},[a("el-input",{model:{value:t.AddFormData.mobile,callback:function(e){t.$set(t.AddFormData,"mobile",e)},expression:"AddFormData.mobile"}})],1),a("el-form-item",{attrs:{label:"登陆密码:"}},[a("el-input",{attrs:{"show-password":""},model:{value:t.AddFormData.pwd,callback:function(e){t.$set(t.AddFormData,"pwd",e)},expression:"AddFormData.pwd"}})],1),a("el-form-item",{attrs:{label:"员工姓名:"}},[a("el-input",{model:{value:t.AddFormData.real_name,callback:function(e){t.$set(t.AddFormData,"real_name",e)},expression:"AddFormData.real_name"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.add_show=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onAddSubmit}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.edit_show,width:"500px"},on:{"update:visible":function(e){t.edit_show=e}}},[a("el-form",{attrs:{model:t.EditFormData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"员工姓名:"}},[a("el-input",{model:{value:t.EditFormData.real_name,callback:function(e){t.$set(t.EditFormData,"real_name",e)},expression:"EditFormData.real_name"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.edit_show=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onEditSubmit}},[t._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"设置角色",width:"450px",visible:t.role_show},on:{"update:visible":function(e){t.role_show=e}}},[a("el-form",{attrs:{model:t.RoleFormData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"拥有角色:"}},[a("el-cascader",{attrs:{clearable:"",options:t.role_rows,props:{checkStrictly:!0,expandTrigger:"hover",value:"uuid",label:"name",emitPath:!1},placeholder:"不选择,无权限"},model:{value:t.RoleFormData.role_uuid,callback:function(e){t.$set(t.RoleFormData,"role_uuid",e)},expression:"RoleFormData.role_uuid"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.role_show=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onRoleSubmit}},[t._v("确认")])],1)],1)],1)},n=[],r=a("2b0e"),i=a("4360"),l=a("d568"),s=a("e0eb");i["a"].state.ManageData||r["default"].set(i["a"].state,"ManageData",{rows:[],total:0,loading:!1,curr_row:null,SearchFormData:{real_name:"",page_num:1,page_len:10,order_field:"add_time",order_sort:"desc"},search_show:!1,add_show:!1,AddFormData:{real_name:"",mobile:"",pwd:""},edit_show:!1,EditFormData:{real_name:""},role_show:!1,role_rows:[],RoleFormData:{manage_uuid:"",role_uuid:""}});var c={data:function(){return i["a"].state.ManageData},computed:{width:function(){return i["a"].state.AppData.width},height:function(){return i["a"].state.AppData.height},upload_url:function(){return i["a"].state.AppData.upload_url},img_host:function(){return i["a"].state.AppData.img_host}},created:function(){this.init()},methods:{onSubMenu:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s["a"].submenu(t,this,l["a"].cookie_get("login_token"),e)},init:function(){var t=this;this.loading=!0,l["a"].req("ManageList",{login_token:l["a"].cookie_get("login_token"),real_name:this.SearchFormData.real_name,page_num:this.SearchFormData.page_num,page_len:this.SearchFormData.page_len,order_field:this.SearchFormData.order_field,order_sort:this.SearchFormData.order_sort}).then((function(e){t.loading=!1,t.rows=e.data.rows,t.total=e.data.total})),setTimeout((function(){t.loading=!1}),1e4)},stateFormat:function(t){return 0==t?"待审":1==t?"已审":"作废"},onRefresh:function(){this.init()},onSearch:function(){this.search_show=!0},onSearchSubmit:function(){this.SearchFormData.page_num=1,this.init()},onSelectRow:function(t){this.curr_row=t},onPageChange:function(t){this.SearchFormData.page_num=t,this.init()},onSortChange:function(t){console.log(t),this.SearchFormData.order_field=t.prop,"ascending"==t.order?this.SearchFormData.order_sort="asc":this.SearchFormData.order_sort="desc",this.init()},handleAdd:function(){this.add_show=!0},onAddSubmit:function(){var t=this;this.AddFormData.login_token=l["a"].cookie_get("login_token"),l["a"].req("ManageAdd",this.AddFormData).then((function(e){t.SearchFormData.page_num=1,t.init(),t.add_show=!1})).catch((function(e){t.$message.error(e.msg)}))},handleEdit:function(){s["a"].empty(this.curr_row)?this.$message.error("请选择一条数据"):(this.EditFormData.real_name=this.curr_row.real_name,this.edit_show)},onEditSubmit:function(){var t=this;this.EditFormData.login_token=l["a"].cookie_get("login_token"),this.EditFormData.uuid=this.curr_row.uuid,l["a"].req("ManageEdit",this.EditFormData).then((function(e){t.init(),t.edit_show=!1})).catch((function(e){t.$message.error(e.msg)}))},handleDel:function(t){var e=this;s["a"].empty(this.curr_row)?this.$message.error("请选择一条数据"):this.$confirm("确认删除?","提示").then((function(){l["a"].req("ManageDel",{login_token:l["a"].cookie_get("login_token"),uuid:e.curr_row.uuid}).then((function(t){e.init(),e.$message.success("操作成功")})).catch((function(t){e.$message.error(t.msg)}))}))},handleSetRole:function(){var t=this;s["a"].empty(this.curr_row)?this.$message.error("请选择一条数据"):l["a"].req({module:"ManageSetRole",ver:"1.0.0",relation_module:"ManageRoleList",relation_ver:"1.0.0"},{login_token:l["a"].cookie_get("login_token")}).then((function(e){t.role_rows=s["a"].toTree(e.data),t.role_show=!0}))},onRoleSubmit:function(){var t=this;l["a"].req("ManageSetRole",{login_token:l["a"].cookie_get("login_token"),manage_uuid:this.curr_row.uuid,role_uuid:this.RoleFormData.role_uuid}).then((function(e){t.role_show=!1})).catch((function(e){t.$message.error(e.msg)}))}}},u=c,d=(a("4f63"),a("2877")),m=Object(d["a"])(u,o,n,!1,null,"66d4cc54",null);e["default"]=m.exports},"4f63":function(t,e,a){"use strict";var o=a("b0de"),n=a.n(o);n.a},b0de:function(t,e,a){}}]);
//# sourceMappingURL=chunk-793c48a8.436fc256.js.map